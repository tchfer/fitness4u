!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{CKRj:function(e,a,i){"use strict";i.r(a),i.d(a,"TrainingModule",function(){return st});var c=i("l7P3"),r=i("PCNd"),o=i("tyNb"),s=i("vQgB"),b=i("fXoL"),u=i("ofXK"),l=i("wZkO"),m=(i("4XzM"),i("a318")),f=i("vEl1"),d=i("XiUz"),p=i("3Pt+"),g=i("Wp6s"),h=i("kmnG"),v=i("d3UM"),y=i("FKr1"),U=i("Xa2L"),V=i("bTqV");function w(t,e){if(1&t&&(b.Vb(0,"mat-option",9),b.Ac(1),b.Ub()),2&t){var n=e.$implicit;b.mc("value",n.id),b.Eb(1),b.Cc(" ",n.name," ")}}function S(t,e){if(1&t&&(b.Vb(0,"mat-form-field"),b.Vb(1,"mat-select",7),b.zc(2,w,2,2,"mat-option",8),b.ic(3,"async"),b.Ub(),b.Ub()),2&t){var n=b.hc();b.Eb(2),b.mc("ngForOf",b.jc(3,1,n.exercises$))}}function C(t,e){1&t&&b.Qb(0,"mat-spinner")}function E(t,e){if(1&t&&(b.Vb(0,"button",12),b.Ac(1,"Start"),b.Ub()),2&t){b.hc(2);var n=b.rc(2);b.mc("disabled",n.invalid)}}function x(t,e){if(1&t){var n=b.Wb();b.Vb(0,"button",13),b.dc("click",function(){return b.tc(n),b.hc(2).fetchTraining()}),b.Ac(1,"Try Again"),b.Ub()}}function A(t,e){if(1&t&&(b.Vb(0,"mat-card-actions",4),b.zc(1,E,2,1,"button",10),b.ic(2,"async"),b.zc(3,x,2,0,"button",11),b.ic(4,"async"),b.Ub()),2&t){var n=b.hc();b.Eb(1),b.mc("ngIf",b.jc(2,2,n.exercises$)),b.Eb(2),b.mc("ngIf",!b.jc(4,4,n.exercises$))}}var z,k=((z=function(){function e(n,a){t(this,e),this.trainingService=n,this.store=a}return n(e,[{key:"ngOnInit",value:function(){this.isLoading$=this.store.select(m.b),this.exercises$=this.store.select(s.c),this.fetchTraining()}},{key:"fetchTraining",value:function(){this.trainingService.fetchAvailableExercises()}},{key:"onStartTraining",value:function(t){this.trainingService.startExercise(t.value.exercise)}}]),e}()).\u0275fac=function(t){return new(t||z)(b.Pb(f.a),b.Pb(c.a))},z.\u0275cmp=b.Jb({type:z,selectors:[["app-new-training"]],decls:14,vars:11,consts:[["fxLayout","","fxLayoutAlign","center",1,"new-training"],[3,"ngSubmit"],["f","ngForm"],["fxFlex.xs","100%","fxFlex","400px"],["fxLayoutAlign","center"],[4,"ngIf"],["fxLayoutAlign","center",4,"ngIf"],["placeholder","Choose Exercise","ngModel","","name","exercise","required",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","submit","mat-raised-button","","color","primary","mat-button","",3,"disabled",4,"ngIf"],["type","button","mat-raised-button","","color","primary","mat-button","",3,"click",4,"ngIf"],["type","submit","mat-raised-button","","color","primary","mat-button","",3,"disabled"],["type","button","mat-raised-button","","color","primary","mat-button","",3,"click"]],template:function(t,e){if(1&t){var n=b.Wb();b.Vb(0,"section",0),b.Vb(1,"form",1,2),b.dc("ngSubmit",function(){b.tc(n);var t=b.rc(2);return e.onStartTraining(t)}),b.Vb(3,"mat-card",3),b.Vb(4,"mat-card-title",4),b.Ac(5,"Time to start workout!"),b.Ub(),b.Vb(6,"mat-card-content",4),b.zc(7,S,4,3,"mat-form-field",5),b.ic(8,"async"),b.ic(9,"async"),b.zc(10,C,1,0,"mat-spinner",5),b.ic(11,"async"),b.Ub(),b.zc(12,A,5,6,"mat-card-actions",6),b.ic(13,"async"),b.Ub(),b.Ub(),b.Ub()}2&t&&(b.Eb(7),b.mc("ngIf",!b.jc(8,3,e.isLoading$)&&b.jc(9,5,e.exercises$)),b.Eb(3),b.mc("ngIf",b.jc(11,7,e.isLoading$)),b.Eb(2),b.mc("ngIf",!b.jc(13,9,e.isLoading$)))},directives:[d.c,d.b,p.u,p.o,p.p,g.a,d.a,g.e,g.c,u.m,h.c,v.a,p.n,p.q,p.s,u.l,y.m,U.c,g.b,V.a],pipes:[u.b],styles:[".new-training[_ngcontent-%COMP%]{padding:30px}"]}),z),I=i("M9IT"),D=i("Dh3D"),T=i("+0xr"),j=i("qFsG");function O(t,e){1&t&&(b.Vb(0,"mat-header-cell",14),b.Ac(1," Date "),b.Ub())}function $(t,e){if(1&t&&(b.Vb(0,"mat-cell"),b.Ac(1),b.ic(2,"date"),b.Ub()),2&t){var n=e.$implicit;b.Eb(1),b.Cc(" ",b.jc(2,1,n.date.toDate())," ")}}function P(t,e){1&t&&(b.Vb(0,"mat-header-cell",14),b.Ac(1," Name "),b.Ub())}function L(t,e){if(1&t&&(b.Vb(0,"mat-cell"),b.Ac(1),b.Ub()),2&t){var n=e.$implicit;b.Eb(1),b.Cc(" ",n.name," ")}}function F(t,e){1&t&&(b.Vb(0,"mat-header-cell",14),b.Ac(1," Calories "),b.Ub())}function M(t,e){if(1&t&&(b.Vb(0,"mat-cell"),b.Ac(1),b.ic(2,"number"),b.Ub()),2&t){var n=e.$implicit;b.Eb(1),b.Cc(" ",b.jc(2,1,n.calories)," ")}}function Q(t,e){1&t&&(b.Vb(0,"mat-header-cell",14),b.Ac(1," Duration "),b.Ub())}function R(t,e){if(1&t&&(b.Vb(0,"mat-cell"),b.Ac(1),b.ic(2,"number"),b.Ub()),2&t){var n=e.$implicit;b.Eb(1),b.Cc(" ",b.jc(2,1,n.duration)," ")}}function q(t,e){1&t&&(b.Vb(0,"mat-header-cell",14),b.Ac(1," State "),b.Ub())}function J(t,e){if(1&t&&(b.Vb(0,"mat-cell"),b.Ac(1),b.Ub()),2&t){var n=e.$implicit;b.Eb(1),b.Cc(" ",n.state," ")}}function N(t,e){1&t&&b.Qb(0,"mat-header-row")}function X(t,e){1&t&&b.Qb(0,"mat-row")}var K,G,H,W=function(){return[5,10,20]},_=((K=function(){function e(n,a){t(this,e),this.trainingService=n,this.store=a,this.displayedColumns=["date","name","duration","calories","state"],this.dataSource=new T.k}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.store.select(s.d).subscribe(function(e){t.dataSource.data=e}),this.trainingService.fetchCompletedOrCancelledExercises()}},{key:"ngAfterViewInit",value:function(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}},{key:"doFilter",value:function(t){this.dataSource.filter=t.trim().toLowerCase()}}]),e}()).\u0275fac=function(t){return new(t||K)(b.Pb(f.a),b.Pb(c.a))},K.\u0275cmp=b.Jb({type:K,selectors:[["app-past-trainings"]],viewQuery:function(t,e){var n;1&t&&(b.Dc(D.a,1),b.Dc(I.a,1)),2&t&&(b.qc(n=b.ec())&&(e.sort=n.first),b.qc(n=b.ec())&&(e.paginator=n.first))},decls:23,vars:8,consts:[[1,"filter"],["matInput","","type","text","placeholder","Filter",3,"keyup"],["matSort","",3,"dataSource","hidden"],["matColumnDef","date"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","name"],["matColumnDef","calories"],["matColumnDef","duration"],["matColumnDef","state"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"hidden","pageSize","pageSizeOptions"],["paginator",""],["mat-sort-header",""]],template:function(t,e){1&t&&(b.Vb(0,"div",0),b.Vb(1,"mat-form-field"),b.Vb(2,"input",1),b.dc("keyup",function(t){return e.doFilter(t.target.value)}),b.Ub(),b.Ub(),b.Ub(),b.Vb(3,"mat-table",2),b.Tb(4,3),b.zc(5,O,2,0,"mat-header-cell",4),b.zc(6,$,3,3,"mat-cell",5),b.Sb(),b.Tb(7,6),b.zc(8,P,2,0,"mat-header-cell",4),b.zc(9,L,2,1,"mat-cell",5),b.Sb(),b.Tb(10,7),b.zc(11,F,2,0,"mat-header-cell",4),b.zc(12,M,3,3,"mat-cell",5),b.Sb(),b.Tb(13,8),b.zc(14,Q,2,0,"mat-header-cell",4),b.zc(15,R,3,3,"mat-cell",5),b.Sb(),b.Tb(16,9),b.zc(17,q,2,0,"mat-header-cell",4),b.zc(18,J,2,1,"mat-cell",5),b.Sb(),b.zc(19,N,1,0,"mat-header-row",10),b.zc(20,X,1,0,"mat-row",11),b.Ub(),b.Qb(21,"mat-paginator",12,13)),2&t&&(b.Eb(3),b.mc("dataSource",e.dataSource)("hidden",0===e.dataSource.data.length),b.Eb(16),b.mc("matHeaderRowDef",e.displayedColumns),b.Eb(1),b.mc("matRowDefColumns",e.displayedColumns),b.Eb(1),b.mc("hidden",0===e.dataSource.data.length)("pageSize",5)("pageSizeOptions",b.nc(7,W)))},directives:[h.c,j.b,T.j,D.a,T.c,T.e,T.b,T.g,T.i,I.a,T.d,D.b,T.a,T.f,T.h],pipes:[u.e,u.f],styles:[".filter[_ngcontent-%COMP%]{margin-left:20px}"]}),K),B=i("IzEk"),Y=i("0IaG"),Z=((H=function e(n){t(this,e),this.passedData=n}).\u0275fac=function(t){return new(t||H)(b.Pb(Y.a))},H.\u0275cmp=b.Jb({type:H,selectors:[["app-stop-training"]],decls:10,vars:3,consts:[["mat-dialog-title",""],["mat-button","",3,"mat-dialog-close"]],template:function(t,e){1&t&&(b.Vb(0,"h1",0),b.Ac(1,"Are you sure you want to quit?"),b.Ub(),b.Vb(2,"mat-dialog-content"),b.Vb(3,"p"),b.Ac(4),b.Ub(),b.Ub(),b.Vb(5,"mat-dialog-actions"),b.Vb(6,"button",1),b.Ac(7,"Yes"),b.Ub(),b.Vb(8,"button",1),b.Ac(9,"No"),b.Ub(),b.Ub()),2&t&&(b.Eb(4),b.Cc("You already got ",e.passedData.progress,"% "),b.Eb(2),b.mc("mat-dialog-close",!0),b.Eb(2),b.mc("mat-dialog-close",!1))},directives:[Y.g,Y.e,Y.c,V.a,Y.d],encapsulation:2}),H),tt=((G=function(){function e(n,a,i){t(this,e),this.dialog=n,this.trainingService=a,this.store=i,this.progress=0}return n(e,[{key:"ngOnInit",value:function(){this.startOrResumetimer()}},{key:"startOrResumetimer",value:function(){var t=this;this.store.select(s.b).pipe(Object(B.a)(1)).subscribe(function(e){t.timer=setInterval(function(){t.progress+=1,t.progress>=100&&(t.trainingService.completeExercise(),clearInterval(t.timer))},e.duration/100*1e3)})}},{key:"onStop",value:function(){var t=this;clearInterval(this.timer),this.dialog.open(Z,{data:{progress:this.progress}}).afterClosed().subscribe(function(e){e?t.trainingService.cancelExercise(t.progress):t.startOrResumetimer()})}}]),e}()).\u0275fac=function(t){return new(t||G)(b.Pb(Y.b),b.Pb(f.a),b.Pb(c.a))},G.\u0275cmp=b.Jb({type:G,selectors:[["app-current-training"]],decls:8,vars:2,consts:[["fxLayout","column","fxLayoutAlign","center center",1,"current-training"],["mode","determinate",3,"value"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,e){1&t&&(b.Vb(0,"section",0),b.Qb(1,"mat-progress-spinner",1),b.Vb(2,"h1"),b.Ac(3),b.Ub(),b.Vb(4,"p"),b.Ac(5,"Keep on going, you can do it!"),b.Ub(),b.Vb(6,"button",2),b.dc("click",function(){return e.onStop()}),b.Ac(7,"Stop"),b.Ub(),b.Ub()),2&t&&(b.Eb(1),b.mc("value",e.progress),b.Eb(2),b.Cc("",e.progress,"%"))},directives:[d.c,d.b,U.a,V.a],styles:[".current-training[_ngcontent-%COMP%]{padding:30px}"]}),G);function et(t,e){1&t&&(b.Vb(0,"mat-tab-group"),b.Vb(1,"mat-tab",1),b.Qb(2,"app-new-training"),b.Ub(),b.Vb(3,"mat-tab",2),b.Qb(4,"app-past-trainings"),b.Ub(),b.Ub())}function nt(t,e){1&t&&b.Qb(0,"app-current-training")}var at,it,ct,rt=[{path:"",component:(at=function(){function e(n){t(this,e),this.store=n}return n(e,[{key:"ngOnInit",value:function(){this.ongoingTraining$=this.store.select(s.e)}}]),e}(),at.\u0275fac=function(t){return new(t||at)(b.Pb(c.a))},at.\u0275cmp=b.Jb({type:at,selectors:[["app-training"]],decls:4,vars:6,consts:[[4,"ngIf"],["label","New Exercise"],["label","Past Exercises"]],template:function(t,e){1&t&&(b.zc(0,et,5,0,"mat-tab-group",0),b.ic(1,"async"),b.zc(2,nt,1,0,"app-current-training",0),b.ic(3,"async")),2&t&&(b.mc("ngIf",!b.jc(1,2,e.ongoingTraining$)),b.Eb(2),b.mc("ngIf",b.jc(3,4,e.ongoingTraining$)))},directives:[u.m,l.b,l.a,k,_,tt],pipes:[u.b],styles:[""]}),at)}],ot=((ct=function e(){t(this,e)}).\u0275fac=function(t){return new(t||ct)},ct.\u0275mod=b.Nb({type:ct}),ct.\u0275inj=b.Mb({imports:[[o.c.forChild(rt)],o.c]}),ct),st=((it=function e(){t(this,e)}).\u0275fac=function(t){return new(t||it)},it.\u0275mod=b.Nb({type:it}),it.\u0275inj=b.Mb({imports:[[r.a,ot,c.b.forFeature("training",s.a)]]}),it)}}])}();