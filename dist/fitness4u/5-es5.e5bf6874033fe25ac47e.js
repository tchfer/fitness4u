!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{CKRj:function(e,i,a){"use strict";a.r(i),a.d(i,"TrainingModule",function(){return ct});var c=a("PCNd"),r=a("tyNb"),o=a("fXoL"),s=a("vEl1"),u=a("ofXK"),b=a("wZkO"),l=(a("4XzM"),a("y8OW")),m=a("XiUz"),f=a("3Pt+"),d=a("Wp6s"),g=a("kmnG"),p=a("d3UM"),h=a("FKr1"),v=a("Xa2L"),y=a("bTqV");function S(t,e){if(1&t&&(o.Vb(0,"mat-option",9),o.Ac(1),o.Ub()),2&t){var n=e.$implicit;o.mc("value",n.id),o.Eb(1),o.Cc(" ",n.name," ")}}function x(t,e){if(1&t&&(o.Vb(0,"mat-form-field"),o.Vb(1,"mat-select",7),o.zc(2,S,2,2,"mat-option",8),o.Ub(),o.Ub()),2&t){var n=o.hc();o.Eb(2),o.mc("ngForOf",n.exercises)}}function U(t,e){1&t&&o.Qb(0,"mat-spinner")}function V(t,e){if(1&t&&(o.Vb(0,"button",12),o.Ac(1,"Start"),o.Ub()),2&t){o.hc(2);var n=o.rc(2);o.mc("disabled",n.invalid)}}function w(t,e){if(1&t){var n=o.Wb();o.Vb(0,"button",13),o.dc("click",function(){return o.tc(n),o.hc(2).fetchTraining()}),o.Ac(1,"Try Again"),o.Ub()}}function C(t,e){if(1&t&&(o.Vb(0,"mat-card-actions",4),o.zc(1,V,2,1,"button",10),o.zc(2,w,2,0,"button",11),o.Ub()),2&t){var n=o.hc();o.Eb(1),o.mc("ngIf",n.exercises),o.Eb(1),o.mc("ngIf",!n.exercises)}}var E,A=((E=function(){function e(n,i){t(this,e),this.trainingService=n,this.uiService=i,this.isLoading=!0}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.loadingSubs=this.uiService.loadingStateChanged.subscribe(function(e){t.isLoading=e}),this.exerciseSubscription=this.trainingService.exercisesChanged.subscribe(function(e){t.exercises=e}),this.fetchTraining()}},{key:"fetchTraining",value:function(){this.trainingService.fetchAvailableExercises()}},{key:"onStartTraining",value:function(t){this.trainingService.startExercise(t.value.exercise)}},{key:"ngOnDestroy",value:function(){this.exerciseSubscription&&this.exerciseSubscription.unsubscribe(),this.loadingSubs&&this.loadingSubs.unsubscribe()}}]),e}()).\u0275fac=function(t){return new(t||E)(o.Pb(s.a),o.Pb(l.a))},E.\u0275cmp=o.Jb({type:E,selectors:[["app-new-training"]],decls:10,vars:3,consts:[["fxLayout","","fxLayoutAlign","center",1,"new-training"],[3,"ngSubmit"],["f","ngForm"],["fxFlex.xs","100%","fxFlex","400px"],["fxLayoutAlign","center"],[4,"ngIf"],["fxLayoutAlign","center",4,"ngIf"],["placeholder","Choose Exercise","ngModel","","name","exercise","required",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","submit","mat-raised-button","","color","primary","mat-button","",3,"disabled",4,"ngIf"],["type","button","mat-raised-button","","color","primary","mat-button","",3,"click",4,"ngIf"],["type","submit","mat-raised-button","","color","primary","mat-button","",3,"disabled"],["type","button","mat-raised-button","","color","primary","mat-button","",3,"click"]],template:function(t,e){if(1&t){var n=o.Wb();o.Vb(0,"section",0),o.Vb(1,"form",1,2),o.dc("ngSubmit",function(){o.tc(n);var t=o.rc(2);return e.onStartTraining(t)}),o.Vb(3,"mat-card",3),o.Vb(4,"mat-card-title",4),o.Ac(5,"Time to start workout!"),o.Ub(),o.Vb(6,"mat-card-content",4),o.zc(7,x,3,1,"mat-form-field",5),o.zc(8,U,1,0,"mat-spinner",5),o.Ub(),o.zc(9,C,3,2,"mat-card-actions",6),o.Ub(),o.Ub(),o.Ub()}2&t&&(o.Eb(7),o.mc("ngIf",!e.isLoading&&e.exercises),o.Eb(1),o.mc("ngIf",e.isLoading),o.Eb(1),o.mc("ngIf",!e.isLoading))},directives:[m.c,m.b,f.u,f.o,f.p,d.a,m.a,d.e,d.c,u.m,g.c,p.a,f.n,f.q,f.s,u.l,h.m,v.c,d.b,y.a],styles:[".new-training[_ngcontent-%COMP%]{padding:30px}"]}),E),k=a("M9IT"),z=a("Dh3D"),D=a("+0xr"),I=a("qFsG");function O(t,e){1&t&&(o.Vb(0,"mat-header-cell",14),o.Ac(1," Date "),o.Ub())}function T(t,e){if(1&t&&(o.Vb(0,"mat-cell"),o.Ac(1),o.ic(2,"date"),o.Ub()),2&t){var n=e.$implicit;o.Eb(1),o.Cc(" ",o.jc(2,1,n.date.toDate())," ")}}function L(t,e){1&t&&(o.Vb(0,"mat-header-cell",14),o.Ac(1," Name "),o.Ub())}function P(t,e){if(1&t&&(o.Vb(0,"mat-cell"),o.Ac(1),o.Ub()),2&t){var n=e.$implicit;o.Eb(1),o.Cc(" ",n.name," ")}}function F(t,e){1&t&&(o.Vb(0,"mat-header-cell",14),o.Ac(1," Calories "),o.Ub())}function M(t,e){if(1&t&&(o.Vb(0,"mat-cell"),o.Ac(1),o.ic(2,"number"),o.Ub()),2&t){var n=e.$implicit;o.Eb(1),o.Cc(" ",o.jc(2,1,n.calories)," ")}}function R(t,e){1&t&&(o.Vb(0,"mat-header-cell",14),o.Ac(1," Duration "),o.Ub())}function Q(t,e){if(1&t&&(o.Vb(0,"mat-cell"),o.Ac(1),o.ic(2,"number"),o.Ub()),2&t){var n=e.$implicit;o.Eb(1),o.Cc(" ",o.jc(2,1,n.duration)," ")}}function j(t,e){1&t&&(o.Vb(0,"mat-header-cell",14),o.Ac(1," State "),o.Ub())}function q(t,e){if(1&t&&(o.Vb(0,"mat-cell"),o.Ac(1),o.Ub()),2&t){var n=e.$implicit;o.Eb(1),o.Cc(" ",n.state," ")}}function J(t,e){1&t&&o.Qb(0,"mat-header-row")}function N(t,e){1&t&&o.Qb(0,"mat-row")}var $,X,K,W=function(){return[5,10,20]},G=(($=function(){function e(n){t(this,e),this.trainingService=n,this.displayedColumns=["date","name","duration","calories","state"],this.dataSource=new D.k}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.exchangedSubscription=this.trainingService.finishedExercisesChanged.subscribe(function(e){t.dataSource.data=e}),this.trainingService.fetchCompletedOrCancelledExercises()}},{key:"ngAfterViewInit",value:function(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}},{key:"doFilter",value:function(t){this.dataSource.filter=t.trim().toLowerCase()}},{key:"ngOnDestroy",value:function(){this.exchangedSubscription&&this.exchangedSubscription.unsubscribe()}}]),e}()).\u0275fac=function(t){return new(t||$)(o.Pb(s.a))},$.\u0275cmp=o.Jb({type:$,selectors:[["app-past-trainings"]],viewQuery:function(t,e){var n;1&t&&(o.Dc(z.a,1),o.Dc(k.a,1)),2&t&&(o.qc(n=o.ec())&&(e.sort=n.first),o.qc(n=o.ec())&&(e.paginator=n.first))},decls:23,vars:8,consts:[[1,"filter"],["matInput","","type","text","placeholder","Filter",3,"keyup"],["matSort","",3,"dataSource","hidden"],["matColumnDef","date"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","name"],["matColumnDef","calories"],["matColumnDef","duration"],["matColumnDef","state"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"hidden","pageSize","pageSizeOptions"],["paginator",""],["mat-sort-header",""]],template:function(t,e){1&t&&(o.Vb(0,"div",0),o.Vb(1,"mat-form-field"),o.Vb(2,"input",1),o.dc("keyup",function(t){return e.doFilter(t.target.value)}),o.Ub(),o.Ub(),o.Ub(),o.Vb(3,"mat-table",2),o.Tb(4,3),o.zc(5,O,2,0,"mat-header-cell",4),o.zc(6,T,3,3,"mat-cell",5),o.Sb(),o.Tb(7,6),o.zc(8,L,2,0,"mat-header-cell",4),o.zc(9,P,2,1,"mat-cell",5),o.Sb(),o.Tb(10,7),o.zc(11,F,2,0,"mat-header-cell",4),o.zc(12,M,3,3,"mat-cell",5),o.Sb(),o.Tb(13,8),o.zc(14,R,2,0,"mat-header-cell",4),o.zc(15,Q,3,3,"mat-cell",5),o.Sb(),o.Tb(16,9),o.zc(17,j,2,0,"mat-header-cell",4),o.zc(18,q,2,1,"mat-cell",5),o.Sb(),o.zc(19,J,1,0,"mat-header-row",10),o.zc(20,N,1,0,"mat-row",11),o.Ub(),o.Qb(21,"mat-paginator",12,13)),2&t&&(o.Eb(3),o.mc("dataSource",e.dataSource)("hidden",0===e.dataSource.data.length),o.Eb(16),o.mc("matHeaderRowDef",e.displayedColumns),o.Eb(1),o.mc("matRowDefColumns",e.displayedColumns),o.Eb(1),o.mc("hidden",0===e.dataSource.data.length)("pageSize",5)("pageSizeOptions",o.nc(7,W)))},directives:[g.c,I.b,D.j,z.a,D.c,D.e,D.b,D.g,D.i,k.a,D.d,z.b,D.a,D.f,D.h],pipes:[u.e,u.f],styles:[".filter[_ngcontent-%COMP%]{margin-left:20px}"]}),$),H=a("0IaG"),_=((K=function e(n){t(this,e),this.passedData=n}).\u0275fac=function(t){return new(t||K)(o.Pb(H.a))},K.\u0275cmp=o.Jb({type:K,selectors:[["app-stop-training"]],decls:10,vars:3,consts:[["mat-dialog-title",""],["mat-button","",3,"mat-dialog-close"]],template:function(t,e){1&t&&(o.Vb(0,"h1",0),o.Ac(1,"Are you sure you want to quit?"),o.Ub(),o.Vb(2,"mat-dialog-content"),o.Vb(3,"p"),o.Ac(4),o.Ub(),o.Ub(),o.Vb(5,"mat-dialog-actions"),o.Vb(6,"button",1),o.Ac(7,"Yes"),o.Ub(),o.Vb(8,"button",1),o.Ac(9,"No"),o.Ub(),o.Ub()),2&t&&(o.Eb(4),o.Cc("You already got ",e.passedData.progress,"% "),o.Eb(2),o.mc("mat-dialog-close",!0),o.Eb(2),o.mc("mat-dialog-close",!1))},directives:[H.g,H.e,H.c,y.a,H.d],encapsulation:2}),K),Y=((X=function(){function e(n,i){t(this,e),this.dialog=n,this.trainingService=i,this.progress=0}return n(e,[{key:"ngOnInit",value:function(){this.startOrResumetimer()}},{key:"startOrResumetimer",value:function(){var t=this,e=this.trainingService.getRunningExercise().duration/100*1e3;this.timer=setInterval(function(){t.progress+=1,t.progress>=100&&(t.trainingService.completeExercise(),clearInterval(t.timer))},e)}},{key:"onStop",value:function(){var t=this;clearInterval(this.timer),this.dialog.open(_,{data:{progress:this.progress}}).afterClosed().subscribe(function(e){e?t.trainingService.cancelExercise(t.progress):t.startOrResumetimer()})}}]),e}()).\u0275fac=function(t){return new(t||X)(o.Pb(H.b),o.Pb(s.a))},X.\u0275cmp=o.Jb({type:X,selectors:[["app-current-training"]],decls:8,vars:2,consts:[["fxLayout","column","fxLayoutAlign","center center",1,"current-training"],["mode","determinate",3,"value"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,e){1&t&&(o.Vb(0,"section",0),o.Qb(1,"mat-progress-spinner",1),o.Vb(2,"h1"),o.Ac(3),o.Ub(),o.Vb(4,"p"),o.Ac(5,"Keep on going, you can do it!"),o.Ub(),o.Vb(6,"button",2),o.dc("click",function(){return e.onStop()}),o.Ac(7,"Stop"),o.Ub(),o.Ub()),2&t&&(o.Eb(1),o.mc("value",e.progress),o.Eb(2),o.Cc("",e.progress,"%"))},directives:[m.c,m.b,v.a,y.a],styles:[".current-training[_ngcontent-%COMP%]{padding:30px}"]}),X);function B(t,e){1&t&&(o.Vb(0,"mat-tab-group"),o.Vb(1,"mat-tab",1),o.Qb(2,"app-new-training"),o.Ub(),o.Vb(3,"mat-tab",2),o.Qb(4,"app-past-trainings"),o.Ub(),o.Ub())}function Z(t,e){1&t&&o.Qb(0,"app-current-training")}var tt,et,nt,it=[{path:"",component:(tt=function(){function e(n){t(this,e),this.trainingService=n,this.ongoingTraining=!1}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.exerciseSubscription=this.trainingService.exerciseChanged.subscribe(function(e){t.ongoingTraining=!!e})}},{key:"ngOnDestroy",value:function(){this.exerciseSubscription&&this.exerciseSubscription.unsubscribe()}}]),e}(),tt.\u0275fac=function(t){return new(t||tt)(o.Pb(s.a))},tt.\u0275cmp=o.Jb({type:tt,selectors:[["app-training"]],decls:2,vars:2,consts:[[4,"ngIf"],["label","New Exercise"],["label","Past Exercises"]],template:function(t,e){1&t&&(o.zc(0,B,5,0,"mat-tab-group",0),o.zc(1,Z,1,0,"app-current-training",0)),2&t&&(o.mc("ngIf",!e.ongoingTraining),o.Eb(1),o.mc("ngIf",e.ongoingTraining))},directives:[u.m,b.b,b.a,A,G,Y],styles:[""]}),tt)}],at=((nt=function e(){t(this,e)}).\u0275fac=function(t){return new(t||nt)},nt.\u0275mod=o.Nb({type:nt}),nt.\u0275inj=o.Mb({imports:[[r.c.forChild(it)],r.c]}),nt),ct=((et=function e(){t(this,e)}).\u0275fac=function(t){return new(t||et)},et.\u0275mod=o.Nb({type:et}),et.\u0275inj=o.Mb({imports:[[c.a,at]]}),et)}}])}();